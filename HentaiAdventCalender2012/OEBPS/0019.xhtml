<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
<title>day18</title>
<link rel="stylesheet" href="css/default.css" type="text/css" />
</head>
<body>
<h3>day18</h3>
<h1>罠カード発動!! 『対話型変態測定器』</h1><br/>
<br/>
この記事はこの記事は<a href="http://atnd.org/events/33835">HENTAI Advent Calendar 2012 - 変態アドベントカレンダー</a>18日目の記事です。<br/>
<br/>
<img src="images/__________2012-11-03_23.31.02_original.png" alt="画像1" /><br/>
昨日(17日目)はKTZさんの<a href="http://ritalin.github.com/2012/12-17/hentai-advent-2012/">(みんなには内緒だよ)</a>でした。ナイショだよ。<br/>
<br/>
どうも皆様。nyaartoです。社会人1年目のへっぽこSE見習いが、<Strike>何かとち狂って</Strike>希望にうち震えて参戦しました。<br/>
<br/>
さて今回、この変態アドベントカレンダーに参加するにあたってこのブログを開設することに相成りました。<br/>
のっけから変態の社交場です。駄目な予感しかしません。<br/>
<br/>
<br/>
良い子のみんなたち! くにへ　かえるんだな。　おまえにも　かぞくが　いるだろう…<br/>
<br/>
さて、<b>人払いも済んだところで</b>さっそく本題へ参りましょう。<br/>
<br/>
一人で過ごすクリスマスは寂しい！<br/>
<br/>
そうでしょう、そうでしょうとも。<br/>
寂しい夜には返事してくれる相手が欲しい！<br/>
<br/>
というわけで本日用意しましたのがこちら。<br/>
<br/>
<a href="http://jsdo.it/blogparts/ptTv">2012-12-18 1st - jsdo.it - share JavaScript, HTML5 and CSS:</a><br/>
<br/>
<br/>
ブログ上でスクリプトを実行できないという事態により、jsdo.itさんにデモをご用意しました。<br/>
<br/>
テキストボックスに「変態」とか「紳士」とか打つと返事が返ってきます。<br/>
わざわざ打っていただくのもアレなので、どうぞミシン目内の文字列をコピーしてお使いください。<br/>
<br/>
※追記:MACで正常動作しなかったので、対応しました。<br/>
<br/>
<img src="images/KKKsIBiT.jpg" alt="画像2" /><br/>
   <br/>
※さらに追記:jsdo.itのデイリーランキング2位の方と並ぶという快挙(((( ;ﾟдﾟ))))ｱﾜﾜﾜﾜ<br/>
変態アドベントカレンダーやばいです。<br/>
<br/>
<br/>
<h2>ここからネタバレです。</h2><br/>
<br/>
<br/>
<br/>
この装置の見ていただきたいポイントは、実は応答が返ってくることではなく、コピー機能の乗っ取りです。<br/>
Ctrl+Cが押されるのをトリガーとして、裏に配置されたテキストボックスにフォーカスをあてています。<br/>
<br/>
これで、クリップボードを直接操作できないChromeやFirefoxなどのブラウザでも、クリップボード内に変な文字列を放りこんでやることができるようになります。<br/>
え？　IEは直接クリップボードがいじれる？　<b>知りませんよ、そんなオーパーツ。</b><br/>
<br/>
Ctrl+Cが乗っ取られているので、どの文章をコピーしても変態です！　と宣言してしまうわけですね。<br/>
MouseEventを見ているため、マウスで右クリックからコピーは防げません。<br/>
そのため、右クリック禁止指定を入れてあります。<br/>
<br/>
これら一連の動作の個人的スゴイポイントは、全てクライアントサイドで行えるということです。<br/>
ソースを見ていただければわかりやすいですが、jsの配列部分に反応文とその応答の文章を書いておけば、<br/>
<b>それらしく会話を行うことも可能です。</b><br/>
<br/>
自分のtwitter副垢とリプライを投げ合うような、不毛な感じがしなくもないですが。<br/>
<br/>
<br/>
さて、19日目となる明日はinatonさんの「<a href=#Qhttp://d.hatena.ne.jp/motefu/20121219T">Recommendifyで気軽にレコメンドエンジンに触れてみる</a>」です！　楽しみですー。<br/>
<br/>

</body>
</html>

